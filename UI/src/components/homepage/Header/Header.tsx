import React, { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
import './Header.scss';
import { metamaskLogin2 } from '../../web3Service';

function Header() {

  const [address, setAddress] = useState();

  const getUserAddress = async () => {
    let walletAdd = await metamaskLogin2();
    setAddress(walletAdd);
    console.log(address);
  }
  
  return (
    <div className="header-wrapper">
      <div className="header-text">
        <Link to="/">
          <svg
            width="234"
            height="38"
            viewBox="0 0 844 91"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M82.823 22.5831C82.823 13.8333 75.1863 9.44713 59.9241 9.44713H13.3615C12.7541 9.44713 12.4617 9.69456 12.4617 10.1669V69.5939C12.4617 70.0437 12.7541 70.2687 13.3615 70.2687H59.7891C75.1413 70.2687 82.823 65.8937 82.823 57.1326V22.5831ZM5.53353 79.7158C1.84451 79.7158 0 78.3662 0 75.667V4.04877C0 1.34959 1.76578 0 5.30859 0H59.4292C83.3292 0 95.2847 7.42275 95.2847 22.2682V57.4925C95.2847 72.3155 83.3292 79.7158 59.4292 79.7158H5.53353Z"
              fill="white"
            />
            <path
              d="M138.65 79.7091C122.24 79.7091 114.041 74.6144 114.041 64.4137V57.8457C114.041 47.7126 122.24 42.6404 138.65 42.6404H187.597V40.8859C187.597 35.5213 182.884 32.8333 173.47 32.8333H157.23C153.383 32.8333 151.471 31.3375 151.471 28.3347C151.471 25.2756 153.383 23.7461 157.23 23.7461H173.47C190.892 23.7461 199.608 29.4594 199.608 40.8859V63.469C199.608 74.2995 191.241 79.7091 174.505 79.7091H138.65ZM173.785 70.7118C182.985 70.7118 187.597 68.1813 187.597 63.1091V50.5579H139.594C130.597 50.5579 126.098 52.8972 126.098 57.5758V63.604C126.098 68.35 130.597 70.7118 139.594 70.7118H173.785Z"
              fill="white"
            />
            <path
              d="M239.786 33.1903V75.4324C239.786 78.6714 237.784 80.291 233.803 80.291C229.664 80.291 227.595 78.6714 227.595 75.4324V33.1903H222.871C219.092 33.1903 217.202 31.6945 217.202 28.6916C217.202 25.7 219.092 24.193 222.871 24.193H227.595V13.6212C227.595 10.3822 229.585 8.7627 233.578 8.7627C237.717 8.7627 239.786 10.3822 239.786 13.6212V24.193H259.581C263.416 24.193 265.34 25.7 265.34 28.6916C265.34 31.6945 263.416 33.1903 259.581 33.1903H239.786Z"
              fill="white"
            />
            <path
              d="M304.939 79.7091C288.53 79.7091 280.331 74.6144 280.331 64.4137V57.8457C280.331 47.7126 288.53 42.6404 304.939 42.6404H353.886V40.8859C353.886 35.5213 349.174 32.8333 339.76 32.8333H323.519C319.673 32.8333 317.761 31.3375 317.761 28.3347C317.761 25.2756 319.673 23.7461 323.519 23.7461H339.76C357.181 23.7461 365.898 29.4594 365.898 40.8859V63.469C365.898 74.2995 357.53 79.7091 340.795 79.7091H304.939ZM340.075 70.7118C349.275 70.7118 353.886 68.1813 353.886 63.1091V50.5579H305.884C296.886 50.5579 292.387 52.8972 292.387 57.5758V63.604C292.387 68.35 296.886 70.7118 305.884 70.7118H340.075Z"
              fill="white"
            />
            <path
              d="M452.949 79.2659C451.869 79.3334 450.722 79.3896 449.53 79.4459C448.36 79.4796 447.112 79.4909 445.796 79.4909H421.277C398.783 79.4909 387.536 72.0906 387.536 57.2676V21.7734C387.536 7.26529 398.581 0 420.693 0H446.381C468.481 0 479.537 7.26529 479.537 21.7734V57.2676C479.537 66.0849 475.623 72.2705 467.795 75.802L475.983 81.4253C478.345 82.8873 479.537 84.3944 479.537 85.9239C479.537 87.4534 478.93 88.6231 477.737 89.4328C476.568 90.2426 474.903 90.6475 472.744 90.6475C472.204 90.6475 471.529 90.535 470.719 90.3326C469.91 90.1526 468.976 89.714 467.93 89.028L452.949 79.2659ZM467.12 21.9983C467.12 13.6309 460.125 9.44713 446.156 9.44713H420.918C406.937 9.44713 399.953 13.6309 399.953 21.9983V57.2676C399.953 65.9387 407.252 70.2687 421.862 70.2687H445.211C459.81 70.2687 467.12 65.9387 467.12 57.2676V21.9983Z"
              fill="white"
            />
            <path
              d="M531.012 79.7138C511.217 79.7138 501.32 73.6632 501.32 61.5394V28.0245C501.32 24.7855 503.344 23.166 507.393 23.166C511.465 23.166 513.511 24.7855 513.511 28.0245V61.6293C513.511 67.4776 519.191 70.4017 530.562 70.4017H552.426C563.786 70.4017 569.477 67.4776 569.477 61.6293V28.0245C569.477 24.7855 571.512 23.166 575.595 23.166C579.734 23.166 581.803 24.7855 581.803 28.0245V61.5394C581.803 73.6632 571.906 79.7138 552.111 79.7138H531.012Z"
              fill="white"
            />
            <path
              d="M615.206 55.5064V62.5693C615.206 68.0014 620.537 70.7118 631.222 70.7118H648.227C652.062 70.7118 653.986 72.2189 653.986 75.2105C653.986 78.2133 652.062 79.7091 648.227 79.7091H631.222C612.473 79.7091 603.104 74.0296 603.104 62.6593V40.0761C603.104 29.1894 611.472 23.7461 628.207 23.7461H661.499C677.84 23.7461 686.017 28.6721 686.017 38.5016V51.3677C686.017 54.1344 684.24 55.5064 680.708 55.5064H615.206ZM615.206 47.5889H673.015C673.612 47.5889 673.915 47.3189 673.915 46.7791V40.7959C673.915 35.4875 669.461 32.8333 660.554 32.8333H628.882C619.761 32.8333 615.206 35.4875 615.206 40.7959V47.5889Z"
              fill="white"
            />
            <path
              d="M779.309 66.798C779.309 75.4129 770.547 79.7091 753.036 79.7091H708.138C704.291 79.7091 702.379 78.2133 702.379 75.2105C702.379 72.2189 704.291 70.7118 708.138 70.7118H753.036C762.483 70.7118 767.207 69.4072 767.207 66.798V60.365C767.207 57.7558 762.483 56.4512 753.036 56.4512H729.327C711.804 56.4512 703.054 52.2674 703.054 43.9V38.5016C703.054 28.6721 712.074 23.7461 730.137 23.7461H745.883C749.808 23.7461 751.776 25.2756 751.776 28.3347C751.776 29.8642 751.247 31.0114 750.201 31.7537C749.178 32.4734 747.738 32.8333 745.883 32.8333H730.137C720.059 32.8333 715.021 34.7228 715.021 38.5016V43.5401C715.021 46.6891 720.014 48.2636 730.002 48.2636H753.756C770.784 48.2636 779.309 52.1775 779.309 60.0051V66.798Z"
              fill="white"
            />
            <path
              d="M817.992 33.1903V75.4324C817.992 78.6714 815.99 80.291 812.008 80.291C807.869 80.291 805.8 78.6714 805.8 75.4324V33.1903H801.076C797.297 33.1903 795.408 31.6945 795.408 28.6916C795.408 25.7 797.297 24.193 801.076 24.193H805.8V13.6212C805.8 10.3822 807.791 8.7627 811.783 8.7627C815.922 8.7627 817.992 10.3822 817.992 13.6212V24.193H837.786C841.622 24.193 843.545 25.7 843.545 28.6916C843.545 31.6945 841.622 33.1903 837.786 33.1903H817.992Z"
              fill="white"
            />
          </svg>
        </Link>
      </div>
      <div className="header-ctas">
        <div className="header-links">
          <ul>
            <li>
              <Link to="/discover">Discover</Link>
            </li>
            <li>
              <Link to="/question">Create Question</Link>
            </li>
            {localStorage.getItem('userWalletAddress') ? (
              <li>
                {localStorage.getItem('userWalletAddress')?.substring(0, 5)}...
                {localStorage.getItem('userWalletAddress')?.substring(37)}
              </li>
            ) : null}
          </ul>
        </div>
        {!localStorage.getItem('userWalletAddress') ? (
          <button onClick={getUserAddress} className="metamask-login-button">
            connect wallet
          </button>
        ) : null}
      </div>
    </div>
  );
}

export default Header;
